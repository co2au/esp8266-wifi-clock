; ESP8266 Wi-Fi Matrix Clock â€” PlatformIO config
; Matches Arduino IDE settings:
;  - Board: Generic ESP8266 Module (use 'esp12e' here)
;  - Flash Size: 4MB (FS:1MB)
;  - Flash Mode: DOUT
;  - CPU Freq: 80 MHz
;  - Filesystem: LittleFS

[env:esp8266-clock-serial]
platform          = espressif8266
board             = esp12e
framework         = arduino
upload_protocol   = esptool
monitor_speed     = 115200

; ---- Flash / FS layout (4M flash, 1M LittleFS) ----
board_build.flash_mode = dout
board_build.flash_size = 4MB
board_build.filesystem = littlefs
board_build.ldscript   = eagle.flash.4m1m.ld
board_build.f_cpu      = 80000000L

; ---- Libraries (auto-fetched) ----
lib_deps =
  majicdesigns/MD_Parola@^3.7.3
  majicdesigns/MD_MAX72XX@^3.7.0
  knolleary/PubSubClient@^2.8
  bblanchon/ArduinoJson@^6.21.3

; ESP8266 core provides: ESP8266WiFi, ESP8266WebServer, ESP8266HTTPUpdateServer, ArduinoOTA, LittleFS, time, Wire, SPI

; Optional: stricter warnings
; build_flags = -Wall

; ----------------------------------------------------

[env:esp8266-clock-ota]
platform          = espressif8266
board             = esp12e
framework         = arduino
upload_protocol   = espota
; Set this to your clock's IP after first serial flash
upload_port       = 10.246.40.70
; If you set an ArduinoOTA password in the web UI/config, add:
; upload_flags = --auth=YOUR_OTA_PASSWORD
monitor_speed     = 115200

board_build.flash_mode = dout
board_build.flash_size = 4MB
board_build.filesystem = littlefs
board_build.ldscript   = eagle.flash.4m1m.ld
board_build.f_cpu      = 80000000L

lib_deps =
  majicdesigns/MD_Parola@^3.7.3
  majicdesigns/MD_MAX72XX@^3.7.0
  knolleary/PubSubClient@^2.8
  bblanchon/ArduinoJson@^6.21.3

